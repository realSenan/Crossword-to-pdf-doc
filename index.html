<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crossword Generator</title>
    <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.12/dist/html-to-image.min.js"></script>

    <!-- html2pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- svg2pdf -->
    <script src="https://cdn.jsdelivr.net/npm/svg2pdf.js@2.3.2/dist/svg2pdf.umd.min.js"></script>
    <!-- Wiris -->
    <script src="https://cdn.jsdelivr.net/npm/@wiris/mathtype-generic@latest/wirisplugin-generic.js"></script>
    <!-- dom-to-image -->
    <script src="https://cdn.jsdelivr.net/npm/dom-to-image@2.6.0/src/dom-to-image.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <link rel="stylesheet" href="/assets/css/index.css" />

    <link rel="shortcut icon" href="/assets/img/icon.png" type="image/x-icon" />
  </head>
  <button
    id="scrollTopBtn"
    title="En √úste Git"
    style="
      position: fixed;
      bottom: 80px;
      right: 40px;
      width: 50px;
      height: 50px;
      border: none;
      border-radius: 50%;
      background-color: #1a1a1a;
      color: white;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    "
  >
    <!-- Yukarƒ± ok ikonu -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="white"
      viewBox="0 0 24 24"
    >
      <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.59 5.58L20 12l-8-8-8 8z" />
    </svg>
  </button>
  <a
    href="#get-content"
    id="scrollTopBtn"
    title="En √úste Git"
    style="
      position: fixed;
      bottom: 20px;
      right: 40px;
      width: 50px;
      height: 50px;
      border: none;
      border-radius: 50%;
      background-color: #1a1a1a;
      color: white;
      cursor: pointer;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    "
  >
    <!-- Yukarƒ± ok ikonu -->
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="white"
      viewBox="0 0 24 24"
    >
      <path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.59 5.58L20 12l-8-8-8 8z" />
    </svg>
  </a>
  <body>
    <main>
      <div class="container">
        <h1>üéØ Crossword Generator</h1>
        <h2>
          Made by Senan
          <a href="https://github.com/realSenan" target="_blank">GitHub</a>
        </h2>

        <!-- PDF ba≈ülƒ±k input'u -->
        <div
          class="input-section"
          style="margin-top: 20px"
          id="pdfTitleSection"
        >
          <input
            type="text"
            id="pdfTitleInput"
            placeholder="PDF ba≈ülƒ±ƒüƒ±nƒ± girin..."
          />
          <button
            class="secondary exportButton"
            type="button"
            style="
              background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            "
          >
            üìÑ PDF Olu≈ütur
          </button>
        </div>
        <div id="pdfErrorMsg" class="error"></div>

        <div class="input-section">
          <input
            type="text"
            id="wordsInput"
            placeholder="Kelimeleri virg√ºlle ayƒ±rarak yazƒ±n (√∂rn: kitap,kedi,at,masa)..."
          />
          <button onclick="generateCrossword()">Olu≈ütur</button>
        </div>

        <div id="errorMsg" class="error"></div>
        <div id="successMsg" class="success"></div>

        <div id="result" class="crossword-container" style="display: none">
          <div class="control-buttons">
            <button id="toggleBtn" class="secondary" onclick="toggleAnswers()">
              Cevaplarƒ± G√∂ster
            </button>
            <button class="secondary" onclick="downloadCrossword()">
              üì• Resim Olarak ƒ∞ndir
            </button>
            <button class="secondary" onclick="regenerateCrossword()">
              üîÑ Yeniden Olu≈ütur
            </button>
          </div>

          <div class="grid-section">
            <div id="crosswordGrid" class="crossword-grid"></div>
          </div>

          <div class="clues-section">
            <div>
              <h2>Yatay (ACROSS)</h2>
              <ul id="cluesAcross" class="clues-list"></ul>
            </div>
            <div>
              <h2>Dikey (DOWN)</h2>
              <ul id="cluesDown" class="clues-list"></ul>
            </div>
          </div>

          <!-- Toplam yerle≈üen/eldeki kelime sayƒ±sƒ± -->
          <div
            id="countSummary"
            style="text-align: center; margin-top: 10px; font-weight: 700"
          ></div>
        </div>

        <div id="toolbar">
          <!-- Margin-bottom select -->
          <select
            id="mb-select"
            style="padding: 5px; border-radius: 4px; margin-left: 10px"
          >
            <option value="10">10px</option>
            <option value="15">15px</option>
            <option value="20">20px</option>
            <option value="25">25px</option>
            <option value="30">30px</option>
          </select>
        </div>

        <!-- Editable container for the editor -->
        <div id="editor-container">
          <div
            id="editor"
            contenteditable="true"
            data-placeholder="Buraya metin yazƒ±n veya denklem ekleyin..."
            spellcheck="false"
          ></div>
        </div>

        <!-- Buttons for controls -->
        <div style="margin-top: 15px; display: flex; gap: 10px">
          <button id="insert-equation">Denklem Ekle</button>
          <button id="get-content">ƒ∞√ßeriƒüi Al</button>
        </div>

        <!-- Output area -->
        <div id="output"></div>
      </div>

      <canvas id="exportCanvas"></canvas>

      <!-- EQUATION EDITOR SECTION -->
      <div
        id="equationSection"
        style="
          display: none;
          margin-top: 40px;
          padding-top: 40px;
          border-top: 3px solid #667eea;
        "
      >
        <div class="container">
          <div style="text-align: center; margin-bottom: 30px">
            <h1>üìê Word Denlem Edit√∂r√º</h1>
            <p style="color: #666">
              Matematiksel denklemleri Word tarzƒ±nda g√∂rsel olarak olu≈üturun
            </p>
          </div>

          <!-- Ribbon / Toolbar -->
          <div
            style="
              display: flex;
              gap: 20px;
              margin-bottom: 20px;
              padding: 15px;
              background: #f5f5f5;
              border-radius: 8px;
              border: 1px solid #ddd;
              flex-wrap: wrap;
            "
          >
            <div
              style="
                display: flex;
                gap: 5px;
                align-items: center;
                padding: 0 15px;
                border-right: 1px solid #ccc;
              "
            >
              <span
                style="
                  font-size: 0.85em;
                  color: #555;
                  font-weight: 600;
                  display: block;
                  margin-right: 10px;
                "
                >Yapƒ±lar</span
              >
              <button class="ribbon-btn" onclick="eqEditor.insertFraction()">
                Kesir
              </button>
              <button class="ribbon-btn" onclick="eqEditor.insertRadical()">
                K√∂k
              </button>
              <button class="ribbon-btn" onclick="eqEditor.insertSuperscript()">
                √úst ƒ∞nd.
              </button>
              <button class="ribbon-btn" onclick="eqEditor.insertSubscript()">
                Alt ƒ∞nd.
              </button>
            </div>

            <div
              style="
                display: flex;
                gap: 5px;
                align-items: center;
                padding: 0 15px;
                border-right: 1px solid #ccc;
              "
            >
              <span
                style="
                  font-size: 0.85em;
                  color: #555;
                  font-weight: 600;
                  display: block;
                  margin-right: 10px;
                "
                >Semboller</span
              >
              <button class="ribbon-btn" onclick="eqEditor.insertSymbol('¬±')">
                ¬±
              </button>
              <button class="ribbon-btn" onclick="eqEditor.insertSymbol('‚à´')">
                ‚à´
              </button>
              <button class="ribbon-btn" onclick="eqEditor.insertSymbol('‚àë')">
                ‚àë
              </button>
              <button class="ribbon-btn" onclick="eqEditor.insertSymbol('‚àö')">
                ‚àö
              </button>
            </div>

            <div
              style="
                display: flex;
                gap: 5px;
                align-items: center;
                padding: 0 15px;
              "
            >
              <span
                style="
                  font-size: 0.85em;
                  color: #555;
                  font-weight: 600;
                  display: block;
                  margin-right: 10px;
                "
                >ƒ∞≈ülemler</span
              >
              <button class="ribbon-btn" onclick="eqEditor.clearEquation()">
                Temizle
              </button>
              <button class="ribbon-btn" onclick="eqEditor.undo()">
                Geri Al
              </button>
              <button class="ribbon-btn" onclick="eqEditor.redo()">
                ƒ∞leri Al
              </button>
            </div>
          </div>

          <!-- Layout Mode -->
          <div style="margin-bottom: 15px; display: flex; gap: 10px">
            <button
              class="layout-btn active"
              onclick="eqEditor.setLayoutMode('inline')"
              style="
                padding: 8px 16px;
                background: #667eea;
                color: white;
                border: 2px solid #667eea;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.9em;
              "
            >
              üìù Satƒ±r ƒ∞√ßi
            </button>
            <button
              class="layout-btn"
              onclick="eqEditor.setLayoutMode('block')"
              style="
                padding: 8px 16px;
                background: white;
                color: #333;
                border: 2px solid #ddd;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.9em;
              "
            >
              üìÑ Blok (Ortalƒ±)
            </button>
          </div>

          <!-- Main Editor -->
          <div
            style="
              display: grid;
              grid-template-columns: 1fr 280px;
              gap: 20px;
              margin-top: 20px;
            "
          >
            <!-- Canvas Area -->
            <div
              id="equationCanvasArea"
              style="
                background: white;
                border: 2px solid #ddd;
                border-radius: 8px;
                padding: 20px;
                min-height: 300px;
                position: relative;
              "
            >
              <canvas
                id="equationCanvas"
                style="width: 100%; height: 300px; display: block; cursor: text"
              ></canvas>
            </div>

            <!-- Symbol Panel -->
            <div
              style="
                background: #f9f9f9;
                border: 1px solid #ddd;
                border-radius: 8px;
                padding: 15px;
                max-height: 500px;
                overflow-y: auto;
              "
            >
              <div style="margin-bottom: 20px">
                <h4
                  style="
                    color: #333;
                    font-size: 0.9em;
                    margin-bottom: 10px;
                    padding-bottom: 5px;
                    border-bottom: 1px solid #ddd;
                  "
                >
                  Matematiksel Semboller
                </h4>
                <div
                  style="
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 5px;
                  "
                >
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('¬±')"
                  >
                    ¬±
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('√ó')"
                  >
                    √ó
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('√∑')"
                  >
                    √∑
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚â†')"
                  >
                    ‚â†
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚â§')"
                  >
                    ‚â§
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚â•')"
                  >
                    ‚â•
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚àë')"
                  >
                    ‚àë
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚àè')"
                  >
                    ‚àè
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚à´')"
                  >
                    ‚à´
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚àö')"
                  >
                    ‚àö
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('‚àû')"
                  >
                    ‚àû
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('œÄ')"
                  >
                    œÄ
                  </button>
                </div>
              </div>

              <div style="margin-bottom: 20px">
                <h4
                  style="
                    color: #333;
                    font-size: 0.9em;
                    margin-bottom: 10px;
                    padding-bottom: 5px;
                    border-bottom: 1px solid #ddd;
                  "
                >
                  Yunanca Harfler
                </h4>
                <div
                  style="
                    display: grid;
                    grid-template-columns: repeat(4, 1fr);
                    gap: 5px;
                  "
                >
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('Œ±')"
                  >
                    Œ±
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('Œ≤')"
                  >
                    Œ≤
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('Œ≥')"
                  >
                    Œ≥
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('Œ∏')"
                  >
                    Œ∏
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('Œª')"
                  >
                    Œª
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('Œº')"
                  >
                    Œº
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('œÉ')"
                  >
                    œÉ
                  </button>
                  <button
                    class="symbol-btn"
                    onclick="eqEditor.insertSymbol('œâ')"
                  >
                    œâ
                  </button>
                </div>
              </div>

              <div style="padding-top: 15px; border-top: 1px solid #ddd">
                <span
                  style="
                    font-size: 0.85em;
                    color: #555;
                    font-weight: 600;
                    display: block;
                    margin-bottom: 10px;
                  "
                  >G√∂r√ºn√º≈ü</span
                >
                <div style="display: flex; gap: 10px; margin-bottom: 5px">
                  <input
                    type="radio"
                    id="modeDisplay"
                    name="displayMode"
                    value="display"
                    checked
                    onchange="eqEditor.setDisplayMode(this.value)"
                  />
                  <label
                    for="modeDisplay"
                    style="cursor: pointer; font-size: 0.9em; color: #555"
                    >Profesyonel</label
                  >
                </div>
                <div style="display: flex; gap: 10px">
                  <input
                    type="radio"
                    id="modeInline"
                    name="displayMode"
                    value="inline"
                    onchange="eqEditor.setDisplayMode(this.value)"
                  />
                  <label
                    for="modeInline"
                    style="cursor: pointer; font-size: 0.9em; color: #555"
                    >Kompakt</label
                  >
                </div>
              </div>
            </div>
          </div>

          <!-- Output Preview -->
          <div
            style="
              margin-top: 20px;
              padding: 20px;
              background: #f0f7ff;
              border: 1px solid #d0e8ff;
              border-radius: 8px;
            "
          >
            <h3 style="color: #333; font-size: 1em; margin-bottom: 10px">
              Denklem √ñnizlemesi
            </h3>
            <div
              id="equationPreview"
              style="
                background: white;
                padding: 15px;
                border: 1px solid #ddd;
                border-radius: 4px;
                min-height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #999;
                font-style: italic;
              "
            >
              Hen√ºz denklem eklenmedi
            </div>
          </div>
        </div>
      </div>
      <!-- Gizli container for PDF generation -->
      <div
        id="pdfTempContainer"
        style="
          position: absolute;
          left: -9999px;
          top: -9999px;
          width: 800px;
          background: white;
          padding: 20px;
        "
      ></div>
      <div class="loader-wrapper">
        <span class="loader"></span>
      </div>
    </main>
    <script src="assets/js/equation-editor.js"></script>
    <script src="assets/js/crossword-web.js"></script>
    <script>
      const scrollBtn = document.getElementById("scrollTopBtn");

      // Sayfa scroll olduƒüunda butonu g√∂ster
      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          // 300px a≈üaƒüƒ± kaydƒ±rƒ±nca g√∂ster
          scrollBtn.style.display = "flex";
        } else {
          scrollBtn.style.display = "none";
        }
      });

      // Butona tƒ±klandƒ±ƒüƒ±nda en √ºste git
      scrollBtn.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });
    </script>
  </body>
</html>
